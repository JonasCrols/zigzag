<!DOCTYPE html>
<html  lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

      <title>Mapping</title>
    
          <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
          <link rel="stylesheet" href="_static/theme.css " type="text/css" />
      
      <!-- sphinx script_files -->
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>

      
      <!-- bundled in js (rollup iife) -->
      <!-- <script src="_static/theme-vendors.js"></script> -->
      <script src="_static/theme.js" defer></script>
    
  <link rel="index" title="Index" href="genindex.html" />
  <link rel="search" title="Search" href="search.html" />
  <link rel="next" title="Contribute to this project" href="contribute.html" />
  <link rel="prev" title="Hardware Architecture Definition" href="hardware.html" /> 
  </head>

  <body>
    <div id="app">
    <div class="theme-container" :class="pageClasses"><navbar @toggle-sidebar="toggleSidebar">
  <router-link to="index.html" class="home-link">
    
      <span class="site-name">zigzag</span>
    
  </router-link>

  <div class="links">
    <navlinks class="can-hide">



    </navlinks>
  </div>
</navbar>

      
      <div class="sidebar-mask" @click="toggleSidebar(false)">
      </div>
        <sidebar @toggle-sidebar="toggleSidebar">
          
          <navlinks>
            



            
          </navlinks><div id="searchbox" class="searchbox" role="search">
  <div class="caption"><span class="caption-text">Quick search</span>
    <div class="searchformwrapper">
      <form class="search" action="search.html" method="get">
        <input type="text" name="q" />
        <input type="submit" value="Search" />
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div><div class="sidebar-links" role="navigation" aria-label="main navigation">
  
    <div class="sidebar-group">
      <p class="caption">
        <span class="caption-text"><a href="index.html#welcome-to-zigzag-s-documentation">Contents:</a></span>
      </p>
      <ul class="current">
        
          <li class="toctree-l1 ">
            
              <a href="zigzag.html" class="reference internal ">Zigzag Framework</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="installation.html" class="reference internal ">Installation</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="getting-started.html" class="reference internal ">Getting Started</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="stages.html" class="reference internal ">Stages</a>
            

            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="hardware.html" class="reference internal ">Hardware Architecture Definition</a>
            

            
          </li>

        
          <li class="toctree-l1 current">
            
              <a href="#" class="reference internal current">Mapping</a>
            

            
              <ul>
                
                  <li class="toctree-l2"><a href="#user-defined-mapping-constraints" class="reference internal">User-defined mapping constraints</a></li>
                
              </ul>
            
          </li>

        
          <li class="toctree-l1 ">
            
              <a href="contribute.html" class="reference internal ">Contribute to this project</a>
            

            
          </li>

        
      </ul>
    </div>
  
</div>
        </sidebar>

      <page>
          <div class="body-header" role="navigation" aria-label="navigation">
  
  <ul class="breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
    
    <li>Mapping</li>
  </ul>
  

  <ul class="page-nav">
  <li class="prev">
    <a href="hardware.html"
       title="previous chapter">← Hardware Architecture Definition</a>
  </li>
  <li class="next">
    <a href="contribute.html"
       title="next chapter">Contribute to this project →</a>
  </li>
</ul>
  
</div>
<hr>
          <div class="content" role="main" v-pre>
            
  <section id="mapping">
<h1>Mapping<a class="headerlink" href="#mapping" title="Permalink to this heading">¶</a></h1>
<p>The mapping defines how the algorithmic operations are mapped onto the computational hardware resources. The zigzag framework automates (parts of) this mapping, but some aspects need to be (at the time of writing) user-defined. The mapping input file is required for running zigzag in combination with the onnx interface. When manually defining your algorithmic layers, the mapping information is encoded within the workload definition (e.g. classes/inputs/workloads/resnet18.py).</p>
<section id="user-defined-mapping-constraints">
<h2>User-defined mapping constraints<a class="headerlink" href="#user-defined-mapping-constraints" title="Permalink to this heading">¶</a></h2>
<p>The mapping file should contain following aspects for every ONNX node that will be mapped onto the accelerator:</p>
<ul class="simple">
<li><p><strong>core_allocation</strong>: The accelerator core id onto which this ONNX node is mapped (the id provided when creating the core in the HW description file).</p></li>
<li><p><strong>spatial_mapping</strong>: The spatial parallelization strategy to execute the node with (this can be automated through the SpatialMappingGeneratorStage).</p></li>
<li><p><strong>memory_operand_links</strong>: The memory operand links, which link the memory operands (defined in the memory hierarchy of the core) to the layer operands (which are generated in the ONNXModelParserStage and are typically ‘O’, ‘I’, ‘W’ for a convolutional layer). This extra memory mapping is added to allow flexible memory allocation schemes, if you don’t know what to put here, a safe bet is copying the example mapping file’s memory mapping.</p></li>
</ul>
<p>A default entry can also be defined. This is useful if you don’t know the exact ONNX node names, or don’t want to customize this for every mapped node. The default entry is automatically detected under the <code class="docutils literal notranslate"><span class="pre">default</span></code> key of the mapping dictionary.</p>
</section>
</section>


          </div>
          <div class="page-nav">
            <div class="inner"><ul class="page-nav">
  <li class="prev">
    <a href="hardware.html"
       title="previous chapter">← Hardware Architecture Definition</a>
  </li>
  <li class="next">
    <a href="contribute.html"
       title="next chapter">Contribute to this project →</a>
  </li>
</ul><div class="footer" role="contentinfo">
      &#169; Copyright 2022, Arne Symons.
    <br>
    Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.1.1 with <a href="https://github.com/schettino72/sphinx_press_theme">Press Theme</a> 0.8.0.
</div>
            </div>
          </div>
      </page>
    </div></div>
    
    
  </body>
</html>